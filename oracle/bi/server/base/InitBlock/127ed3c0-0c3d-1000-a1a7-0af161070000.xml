<?xml version="1.0" encoding="UTF-8" ?>
<InitBlock mdsid="m127ed3c0-0c3d-1000-a1a7-0af161070000" name="Maintenance Organization" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.oracle.com/obis/repository" isSessionVar="true" isRowWiseInit="true" isEnabled="false" refreshPeriod="86400">
<Description><![CDATA[Retrieve the Maintenance organizations from OLTP application, corresponding to the login user.]]></Description>
<DBMapItem name="DefaultMulDB">
<Value><![CDATA[SELECT
DISTINCT  'MAINT_ORG_LIST', BIS_ORGANIZATIONS_V.ID
FROM FND_USER_RESP_GROUPS, BIS_ORGANIZATIONS_V 
WHERE FND_USER_RESP_GROUPS.RESPONSIBILITY_ID = BIS_ORGANIZATIONS_V.RESPONSIBILITY_ID 
AND FND_USER_RESP_GROUPS.START_DATE < SYSDATE
AND BIS_ORGANIZATIONS_V.EAM_ENABLED_FLAG = 'Y'
AND (CASE WHEN FND_USER_RESP_GROUPS.END_DATE IS NULL THEN SYSDATE ELSE TO_DATE(FND_USER_RESP_GROUPS.END_DATE) END) >= SYSDATE 
AND FND_USER_RESP_GROUPS.USER_ID = (CASE WHEN 'VALUEOF(NQ_SESSION.EBS_SSO_INTEGRATION_MODE)' = 'Integrated' 
THEN VALUEOF(NQ_SESSION.OLTP_EBS_USER_ID) ELSE (SELECT USER_ID FROM FND_USER WHERE USER_NAME = ':USER') END) 
AND FND_USER_RESP_GROUPS.RESPONSIBILITY_ID = (CASE WHEN 'VALUEOF(NQ_SESSION.EBS_SSO_INTEGRATION_MODE)' = 'Integrated' 
THEN VALUEOF(NQ_SESSION.OLTP_EBS_RESP_ID) ELSE FND_USER_RESP_GROUPS.RESPONSIBILITY_ID END)
AND FND_USER_RESP_GROUPS.RESPONSIBILITY_APPLICATION_ID = (CASE WHEN 'VALUEOF(NQ_SESSION.EBS_SSO_INTEGRATION_MODE)' = 'Integrated'
THEN VALUEOF(NQ_SESSION.OLTP_EBS_RESP_APPL_ID) ELSE FND_USER_RESP_GROUPS.RESPONSIBILITY_APPLICATION_ID END)]]></Value>
</DBMapItem>
<RefPredecessors>
<RefInitBlock refId="m127ed3c0-0c3d-1000-a1a7-0af161070000-m80c061dd-0bd9-0000-714b-e31d00000000" predecessorRef="/oracle/bi/server/base/InitBlock/80c061dd-0bd9-0000-714b-e31d00000000.xml#m80c061dd-0bd9-0000-714b-e31d00000000"/>
</RefPredecessors>
<RefVariables>
<RefVariable refId="m127ed3c0-0c3d-1000-a1a7-0af161070000-m2fca3780-0c3d-1000-a1a7-0af161070000" variableRef="/oracle/bi/server/base/Variable/2fca3780-0c3d-1000-a1a7-0af161070000.xml#m2fca3780-0c3d-1000-a1a7-0af161070000"/>
</RefVariables>
<InitString><![CDATA[SELECT
DISTINCT  'MAINT_ORG_LIST', BIS_ORGANIZATIONS_V.ID
FROM FND_USER_RESP_GROUPS, BIS_ORGANIZATIONS_V 
WHERE FND_USER_RESP_GROUPS.RESPONSIBILITY_ID = BIS_ORGANIZATIONS_V.RESPONSIBILITY_ID 
AND FND_USER_RESP_GROUPS.START_DATE < SYSDATE
AND BIS_ORGANIZATIONS_V.EAM_ENABLED_FLAG = 'Y'
AND (CASE WHEN FND_USER_RESP_GROUPS.END_DATE IS NULL THEN SYSDATE ELSE TO_DATE(FND_USER_RESP_GROUPS.END_DATE) END) >= SYSDATE 
AND FND_USER_RESP_GROUPS.USER_ID = (CASE WHEN 'VALUEOF(NQ_SESSION.EBS_SSO_INTEGRATION_MODE)' = 'Integrated' 
THEN VALUEOF(NQ_SESSION.OLTP_EBS_USER_ID) ELSE (SELECT USER_ID FROM FND_USER WHERE USER_NAME = ':USER') END) 
AND FND_USER_RESP_GROUPS.RESPONSIBILITY_ID = (CASE WHEN 'VALUEOF(NQ_SESSION.EBS_SSO_INTEGRATION_MODE)' = 'Integrated' 
THEN VALUEOF(NQ_SESSION.OLTP_EBS_RESP_ID) ELSE FND_USER_RESP_GROUPS.RESPONSIBILITY_ID END)
AND FND_USER_RESP_GROUPS.RESPONSIBILITY_APPLICATION_ID = (CASE WHEN 'VALUEOF(NQ_SESSION.EBS_SSO_INTEGRATION_MODE)' = 'Integrated'
THEN VALUEOF(NQ_SESSION.OLTP_EBS_RESP_APPL_ID) ELSE FND_USER_RESP_GROUPS.RESPONSIBILITY_APPLICATION_ID END)]]></InitString>
</InitBlock>